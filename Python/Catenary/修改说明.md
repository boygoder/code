## 修改说明

本次修改主要是为了解决两个问题：

1. 部分曲线拟合错误。
2. 实现将断裂缆绳连接的算法。



## 部分曲线拟合错误

在尝试拟合样例图片时，发现无法正确判别缆绳数量。在打印出像素矩阵后发现，像素矩阵中并不是非0即1的二值图，而应该称为灰度图，也就是白色像素点处是浮点数。那么，**修改方法是在判断缆绳数量之前，将非0的像素点处设为1**。这样就保证了样本点处为1，背景色处为0。

进行上述修改之后，再次对样例图片拟合，大部分图片拟合不错。仍然有几张拟合效果不好，如下：

![第19张](./badfit/19.png)![](./badfit/fit/19_fit.png)


![第23张](./badfit/23.png)![](./badfit/fit/23_fit.png)

其中，第19张拟合不好的原因是：交点部分过长，导致某一条缆绳曲线被分为相距较远的两段。第23张拟合不好的原因是：两条缆绳相交处，正是一条缆绳的尾部与另一条缆绳的头部相连，很难将其识别为两条缆绳。

## 断点连接

- [x] 尝试：sobel边缘检测，提取曲线得边缘。
- [ ] 尝试：cv.findcontours，很接近效果了，可以把一段段的曲线分离出来。每个集合中存储一簇曲线的点，找出端点，我们希望连接端点间距离最近的曲线。（有可能会错连，如何限制端点间的距离？）
- [ ]  尝试：如何辨别端点？看八邻域内的点，端点的话领域内只有一个点，计算梯度，然后向梯度方向延伸一段距离（以其为中心的矩阵范围内），如果遇到点的话，就连接起来。
- [ ]  困难：无法正确识别端点，边缘检测得到的点过于密集，发现每个点的领域内至少有三个其他点。需要新的方法去检测端点或者优化边缘检测方法。